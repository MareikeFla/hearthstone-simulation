{"ast":null,"code":"import CardDefinitions from \"../Components/CardDefinitions\";\nfunction fight(card1, card2, removedDivineShieldFromMyCard, setRemovedDivineShieldFromMyCard) {\n  let myCard = {\n    ...card1\n  };\n  let opponent = {\n    ...card2\n  };\n  let result = null;\n  if (removedDivineShieldFromMyCard) {\n    myCard.keywords.push(\"Divine Shield\");\n    setRemovedDivineShieldFromMyCard(false);\n    console.log(\"Reset Devine Shield\");\n  }\n  console.log(myCard.name, opponent.name, myCard.keywords.includes(\"Divine Shield\"));\n  // Prevent endless loop when both have 0 attack\n  if (myCard.attack === 0 && opponent.attack === 0) {\n    console.log(\"prevented endless loop\", myCard.name, opponent.name);\n    return \"draw\";\n  }\n\n  // Check if both have Divine Shield and remove it if so\n  if (myCard.keywords.includes(\"Divine Shield\") && opponent.keywords.includes(\"Divine Shield\")) {\n    myCard.keywords.splice(myCard.keywords.findIndex(keyword => keyword === \"Divine Shield\"), myCard.keywords.findIndex(keyword => keyword === \"Divine Shield\"));\n    opponent.keywords.splice(opponent.keywords.findIndex(keyword => keyword === \"Divine Shield\"), opponent.keywords.findIndex(keyword => keyword === \"Divine Shield\"));\n    console.log(\"removed double Devine Shiled\", myCard.name, opponent.name);\n    setRemovedDivineShieldFromMyCard(true);\n  }\n  // Check for Divine Shield and simulate the first attack without getting damaged, remove Devine Shield\n\n  if (myCard.keywords.includes(\"Divine Shield\") && opponent.attack > 0) {\n    opponent.health = opponent.health - myCard.attack;\n    myCard.keywords.splice(myCard.keywords.findIndex(keyword => keyword === \"Divine Shield\"), myCard.keywords.findIndex(keyword => keyword === \"Divine Shield\"));\n    setRemovedDivineShieldFromMyCard(true);\n    console.log(\"removed  Devine Shiled from:\", myCard.name);\n  }\n  if (opponent.keywords.includes(\"Divine Shield\") && myCard.attack > 0) {\n    myCard.health = myCard.health - opponent.attack;\n    opponent.keywords.splice(opponent.keywords.findIndex(keyword => keyword === \"Divine Shield\"), opponent.keywords.findIndex(keyword => keyword === \"Divine Shield\"));\n    console.log(\"removed  Devine Shiled from:\", opponent.name, myCard.health);\n  }\n\n  // Simulate the fight until one card has 0/<0 health\n  while (myCard.health > 0 && opponent.health > 0) {\n    myCard.health = myCard.health - opponent.attack;\n    opponent.health = opponent.health - myCard.attack;\n  }\n\n  // Return result\n  if (myCard.health > 0) {\n    result = \"win\";\n  } else if (opponent.health > 0) {\n    result = \"loose\";\n  } else {\n    result = \"draw\";\n  }\n  return result;\n}\nexport function fightAll(myCard, removedDivineShieldFromMyCard, setRemovedDivineShieldFromMyCard) {\n  let results = CardDefinitions.map(opponent => {\n    // console.log(opponent.name, myCard.name, fight(myCard, opponent));\n    return fight(myCard, opponent, removedDivineShieldFromMyCard, setRemovedDivineShieldFromMyCard);\n  });\n  return {\n    win: results.filter(result => result === \"win\").length,\n    loose: results.filter(result => result === \"loose\").length,\n    draw: results.filter(result => result === \"draw\").length\n  };\n}","map":{"version":3,"names":["CardDefinitions","fight","card1","card2","removedDivineShieldFromMyCard","setRemovedDivineShieldFromMyCard","myCard","opponent","result","keywords","push","console","log","name","includes","attack","splice","findIndex","keyword","health","fightAll","results","map","win","filter","length","loose","draw"],"sources":["/Users/mareike/Projekte/hearthstone/src/lib/fight.js"],"sourcesContent":["import CardDefinitions from \"../Components/CardDefinitions\";\n\nfunction fight(\n  card1,\n  card2,\n  removedDivineShieldFromMyCard,\n  setRemovedDivineShieldFromMyCard\n) {\n  let myCard = { ...card1 };\n  let opponent = { ...card2 };\n  let result = null;\n\n  if (removedDivineShieldFromMyCard) {\n    myCard.keywords.push(\"Divine Shield\");\n    setRemovedDivineShieldFromMyCard(false);\n    console.log(\"Reset Devine Shield\");\n  }\n  console.log(\n    myCard.name,\n    opponent.name,\n    myCard.keywords.includes(\"Divine Shield\")\n  );\n  // Prevent endless loop when both have 0 attack\n  if (myCard.attack === 0 && opponent.attack === 0) {\n    console.log(\"prevented endless loop\", myCard.name, opponent.name);\n    return \"draw\";\n  }\n\n  // Check if both have Divine Shield and remove it if so\n  if (\n    myCard.keywords.includes(\"Divine Shield\") &&\n    opponent.keywords.includes(\"Divine Shield\")\n  ) {\n    myCard.keywords.splice(\n      myCard.keywords.findIndex((keyword) => keyword === \"Divine Shield\"),\n      myCard.keywords.findIndex((keyword) => keyword === \"Divine Shield\")\n    );\n    opponent.keywords.splice(\n      opponent.keywords.findIndex((keyword) => keyword === \"Divine Shield\"),\n      opponent.keywords.findIndex((keyword) => keyword === \"Divine Shield\")\n    );\n    console.log(\"removed double Devine Shiled\", myCard.name, opponent.name);\n    setRemovedDivineShieldFromMyCard(true);\n  }\n  // Check for Divine Shield and simulate the first attack without getting damaged, remove Devine Shield\n\n  if (myCard.keywords.includes(\"Divine Shield\") && opponent.attack > 0) {\n    opponent.health = opponent.health - myCard.attack;\n\n    myCard.keywords.splice(\n      myCard.keywords.findIndex((keyword) => keyword === \"Divine Shield\"),\n      myCard.keywords.findIndex((keyword) => keyword === \"Divine Shield\")\n    );\n    setRemovedDivineShieldFromMyCard(true);\n    console.log(\"removed  Devine Shiled from:\", myCard.name);\n  }\n  if (opponent.keywords.includes(\"Divine Shield\") && myCard.attack > 0) {\n    myCard.health = myCard.health - opponent.attack;\n    opponent.keywords.splice(\n      opponent.keywords.findIndex((keyword) => keyword === \"Divine Shield\"),\n      opponent.keywords.findIndex((keyword) => keyword === \"Divine Shield\")\n    );\n    console.log(\"removed  Devine Shiled from:\", opponent.name, myCard.health);\n  }\n\n  // Simulate the fight until one card has 0/<0 health\n  while (myCard.health > 0 && opponent.health > 0) {\n    myCard.health = myCard.health - opponent.attack;\n    opponent.health = opponent.health - myCard.attack;\n  }\n\n  // Return result\n  if (myCard.health > 0) {\n    result = \"win\";\n  } else if (opponent.health > 0) {\n    result = \"loose\";\n  } else {\n    result = \"draw\";\n  }\n  return result;\n}\n\nexport function fightAll(\n  myCard,\n  removedDivineShieldFromMyCard,\n  setRemovedDivineShieldFromMyCard\n) {\n  let results = CardDefinitions.map((opponent) => {\n    // console.log(opponent.name, myCard.name, fight(myCard, opponent));\n    return fight(\n      myCard,\n      opponent,\n      removedDivineShieldFromMyCard,\n      setRemovedDivineShieldFromMyCard\n    );\n  });\n  return {\n    win: results.filter((result) => result === \"win\").length,\n    loose: results.filter((result) => result === \"loose\").length,\n    draw: results.filter((result) => result === \"draw\").length,\n  };\n}\n"],"mappings":"AAAA,OAAOA,eAAe,MAAM,+BAA+B;AAE3D,SAASC,KAAKA,CACZC,KAAK,EACLC,KAAK,EACLC,6BAA6B,EAC7BC,gCAAgC,EAChC;EACA,IAAIC,MAAM,GAAG;IAAE,GAAGJ;EAAM,CAAC;EACzB,IAAIK,QAAQ,GAAG;IAAE,GAAGJ;EAAM,CAAC;EAC3B,IAAIK,MAAM,GAAG,IAAI;EAEjB,IAAIJ,6BAA6B,EAAE;IACjCE,MAAM,CAACG,QAAQ,CAACC,IAAI,CAAC,eAAe,CAAC;IACrCL,gCAAgC,CAAC,KAAK,CAAC;IACvCM,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;EACpC;EACAD,OAAO,CAACC,GAAG,CACTN,MAAM,CAACO,IAAI,EACXN,QAAQ,CAACM,IAAI,EACbP,MAAM,CAACG,QAAQ,CAACK,QAAQ,CAAC,eAAe,CAC1C,CAAC;EACD;EACA,IAAIR,MAAM,CAACS,MAAM,KAAK,CAAC,IAAIR,QAAQ,CAACQ,MAAM,KAAK,CAAC,EAAE;IAChDJ,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEN,MAAM,CAACO,IAAI,EAAEN,QAAQ,CAACM,IAAI,CAAC;IACjE,OAAO,MAAM;EACf;;EAEA;EACA,IACEP,MAAM,CAACG,QAAQ,CAACK,QAAQ,CAAC,eAAe,CAAC,IACzCP,QAAQ,CAACE,QAAQ,CAACK,QAAQ,CAAC,eAAe,CAAC,EAC3C;IACAR,MAAM,CAACG,QAAQ,CAACO,MAAM,CACpBV,MAAM,CAACG,QAAQ,CAACQ,SAAS,CAAEC,OAAO,IAAKA,OAAO,KAAK,eAAe,CAAC,EACnEZ,MAAM,CAACG,QAAQ,CAACQ,SAAS,CAAEC,OAAO,IAAKA,OAAO,KAAK,eAAe,CACpE,CAAC;IACDX,QAAQ,CAACE,QAAQ,CAACO,MAAM,CACtBT,QAAQ,CAACE,QAAQ,CAACQ,SAAS,CAAEC,OAAO,IAAKA,OAAO,KAAK,eAAe,CAAC,EACrEX,QAAQ,CAACE,QAAQ,CAACQ,SAAS,CAAEC,OAAO,IAAKA,OAAO,KAAK,eAAe,CACtE,CAAC;IACDP,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEN,MAAM,CAACO,IAAI,EAAEN,QAAQ,CAACM,IAAI,CAAC;IACvER,gCAAgC,CAAC,IAAI,CAAC;EACxC;EACA;;EAEA,IAAIC,MAAM,CAACG,QAAQ,CAACK,QAAQ,CAAC,eAAe,CAAC,IAAIP,QAAQ,CAACQ,MAAM,GAAG,CAAC,EAAE;IACpER,QAAQ,CAACY,MAAM,GAAGZ,QAAQ,CAACY,MAAM,GAAGb,MAAM,CAACS,MAAM;IAEjDT,MAAM,CAACG,QAAQ,CAACO,MAAM,CACpBV,MAAM,CAACG,QAAQ,CAACQ,SAAS,CAAEC,OAAO,IAAKA,OAAO,KAAK,eAAe,CAAC,EACnEZ,MAAM,CAACG,QAAQ,CAACQ,SAAS,CAAEC,OAAO,IAAKA,OAAO,KAAK,eAAe,CACpE,CAAC;IACDb,gCAAgC,CAAC,IAAI,CAAC;IACtCM,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEN,MAAM,CAACO,IAAI,CAAC;EAC1D;EACA,IAAIN,QAAQ,CAACE,QAAQ,CAACK,QAAQ,CAAC,eAAe,CAAC,IAAIR,MAAM,CAACS,MAAM,GAAG,CAAC,EAAE;IACpET,MAAM,CAACa,MAAM,GAAGb,MAAM,CAACa,MAAM,GAAGZ,QAAQ,CAACQ,MAAM;IAC/CR,QAAQ,CAACE,QAAQ,CAACO,MAAM,CACtBT,QAAQ,CAACE,QAAQ,CAACQ,SAAS,CAAEC,OAAO,IAAKA,OAAO,KAAK,eAAe,CAAC,EACrEX,QAAQ,CAACE,QAAQ,CAACQ,SAAS,CAAEC,OAAO,IAAKA,OAAO,KAAK,eAAe,CACtE,CAAC;IACDP,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEL,QAAQ,CAACM,IAAI,EAAEP,MAAM,CAACa,MAAM,CAAC;EAC3E;;EAEA;EACA,OAAOb,MAAM,CAACa,MAAM,GAAG,CAAC,IAAIZ,QAAQ,CAACY,MAAM,GAAG,CAAC,EAAE;IAC/Cb,MAAM,CAACa,MAAM,GAAGb,MAAM,CAACa,MAAM,GAAGZ,QAAQ,CAACQ,MAAM;IAC/CR,QAAQ,CAACY,MAAM,GAAGZ,QAAQ,CAACY,MAAM,GAAGb,MAAM,CAACS,MAAM;EACnD;;EAEA;EACA,IAAIT,MAAM,CAACa,MAAM,GAAG,CAAC,EAAE;IACrBX,MAAM,GAAG,KAAK;EAChB,CAAC,MAAM,IAAID,QAAQ,CAACY,MAAM,GAAG,CAAC,EAAE;IAC9BX,MAAM,GAAG,OAAO;EAClB,CAAC,MAAM;IACLA,MAAM,GAAG,MAAM;EACjB;EACA,OAAOA,MAAM;AACf;AAEA,OAAO,SAASY,QAAQA,CACtBd,MAAM,EACNF,6BAA6B,EAC7BC,gCAAgC,EAChC;EACA,IAAIgB,OAAO,GAAGrB,eAAe,CAACsB,GAAG,CAAEf,QAAQ,IAAK;IAC9C;IACA,OAAON,KAAK,CACVK,MAAM,EACNC,QAAQ,EACRH,6BAA6B,EAC7BC,gCACF,CAAC;EACH,CAAC,CAAC;EACF,OAAO;IACLkB,GAAG,EAAEF,OAAO,CAACG,MAAM,CAAEhB,MAAM,IAAKA,MAAM,KAAK,KAAK,CAAC,CAACiB,MAAM;IACxDC,KAAK,EAAEL,OAAO,CAACG,MAAM,CAAEhB,MAAM,IAAKA,MAAM,KAAK,OAAO,CAAC,CAACiB,MAAM;IAC5DE,IAAI,EAAEN,OAAO,CAACG,MAAM,CAAEhB,MAAM,IAAKA,MAAM,KAAK,MAAM,CAAC,CAACiB;EACtD,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}